# A workflow that is scheduled daily and carries out maintenance tasks.
name: Maintenance

on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch: {}

jobs:
  # A job to delete obsolete package versions (container images) from the GitHub registry.
  delete_container_images:
    runs-on: ubuntu-latest

    permissions:
      packages: write

    steps:
      - name: Delete old package versions.
        uses: jenskeiner/ghcr-cleanup-action@v1
        with:
          exclude-tags: 'main,master,develop'
          keep-n-tagged: 3
          token: ${{ secrets.GITHUB_TOKEN }}
